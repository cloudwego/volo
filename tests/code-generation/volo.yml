# Please refer to https://www.cloudwego.io/docs/volo/guide/config/ for the configuration file format.
entries:
  # Protobuf entries for testing
  proto_service_a:
    filename: proto_service_a_gen.rs
    protocol: protobuf
    split_generated_files: true
    with_descriptor: true
    services:
      - idl:
          source: local
          path: proto/service_a.proto
          includes:
            - proto
  
  proto_service_b:
    filename: proto_service_b_gen.rs
    protocol: protobuf
    services:
      - idl:
          source: local
          path: proto/service_b.proto
          includes:
            - proto
        codegen_option:
          keep_unknown_fields: true
  
  proto_service_c:
    filename: proto_service_c_gen.rs
    protocol: protobuf
    services:
      - idl:
          source: local
          path: proto/service_c.proto
          includes:
            - proto

  proto:
    filename: descriptor_gen.rs
    protocol: protobuf
    touch_all: true
    with_descriptor: true
    services:
      - idl:
          source: local
          path: proto/descriptor.proto
          includes:
            - proto

  thrift:
    filename: thrift_gen.rs
    protocol: thrift
    split_generated_files: true
    repos:
      thrift:
        url: https://github.com/apache/thrift.git
        ref: HEAD
        lock: 9bd1f1bee7bf59080492bbd3213ca1fed57ab4d6
    services:
      - idl:
          source: local
          path: thrift/test.thrift
      - idl:
          source: git
          repo: thrift
          path: test/Service.thrift
    dedups:
      - CommonReq
